## è®¤è¯†å‰ç«¯å·¥å…·é“¾ï¼ˆä¸€ï¼‰

### å‰ç«¯å·¥å…·é“¾ç»¼è¿°

å·¥å…·é“¾åœ¨å‰ç«¯é¢†åŸŸæ‰®æ¼”ç€å¾ˆé‡è¦çš„è§’è‰²ã€‚å¦‚ä½•**ä¸ºJavascriptç”Ÿäº§ç¯å¢ƒæ„å»ºå»æ„å»ºä¸€å¥—å·¥å…·é“¾ï¼Œæ¥è¦†ç›–å‰ç«¯å„ä¸ªå¼€å‘ç¯èŠ‚**ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦äº†è§£å­¦ä¹ çš„ã€‚è€Œä¸€å¥—é«˜æ•ˆçš„å·¥å…·é“¾ä½“ç³»ï¼Œå¯¹äºæ¯ä¸€ä¸ªå‰ç«¯å›¢é˜Ÿæ¥è¯´éƒ½æœ‰ç€è‡³å…³é‡è¦çš„æ„ä¹‰ï¼Œå®ƒä¸ä»…å¯ä»¥æé«˜å›¢é˜Ÿçš„å¼€å‘æ•ˆç‡ï¼Œè¿˜å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§„èŒƒå‰ç«¯å¼€å‘çš„å„ä¸ªç¯èŠ‚ï¼Œè¿›è€Œä¸ºå›¢é˜ŸèŠ‚çœä¸€äº›äººå‘˜åä½œå’Œè°ƒæ•´çš„æˆæœ¬ã€‚

ç»¼ä¸Šï¼Œ**å‰ç«¯å·¥å…·é“¾æ—¨åœ¨å‹å¥½å¼€å‘ä½“éªŒï¼Œæå‡å¼€å‘å›¢é˜Ÿå¼€å‘æ•ˆç‡**ã€‚

è€Œè¦æ„å»ºä¸€ä¸ªå·¥å…·é“¾ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆè¦äº†è§£åœ¨å‰ç«¯å¼€å‘é¢†åŸŸæœ‰å“ªå‡ ä¸ªç¯èŠ‚ï¼š

* é¡¹ç›®åˆå§‹åŒ–
* å¼€å‘ã€è°ƒè¯•ã€æ„å»º
* å•å…ƒæµ‹è¯•
* å‘å¸ƒ

æ‰€ä»¥ä¸€ä¸ªå‰ç«¯å·¥å…·é“¾ï¼Œå®ƒå¤§è‡´éƒ½ä¼šåŒ…å«ä¸Šé¢è¿™ä¸€ç³»åˆ—åŠŸèƒ½ã€‚è€Œä¸€ä¸ªå…¸å‹çš„ç¤ºä¾‹å°±ç±»ä¼¼äºä¸‹é¢ï¼š

* Yeoman
* Webpack
* Mocha
* å‘å¸ƒç³»ç»Ÿ

æˆ‘ä»¬å¯ä»¥å°†è¿›è€Œå°†å®ƒæ€»ç»“æˆä¸‹é¢å‡ å—ï¼š

* **è„šæ‰‹æ¶**
* æ„å»ºâ¼¯å…·
* æµ‹è¯•å·¥å…·
* å‘å¸ƒç³»ç»Ÿ

è€Œä¸Šäº†è§„æ¨¡çš„å›¢é˜Ÿä¹Ÿéƒ½ä¼šé’ˆå¯¹ä»¥ä¸Šçš„æµç¨‹ï¼Œåˆ¶å®šä¸€ä¸ªå·¥å…·é“¾ï¼Œå¹¶å°†å®ƒåŒ…è£…æˆä¸€ä¸ªé»‘ç›’å½¢å¼ï¼Œè®©ç¨‹åºå‘˜åœ¨æ¯ä¸ªç¯èŠ‚åªéœ€è¦è¿è¡Œç®€å•å‘½ä»¤è¡Œï¼Œå³å¯è¿›å…¥å¼€å‘æµç¨‹ã€‚

è€Œä»æ•´ä½“ä¸Šäº†è§£å·¥å…·é“¾ç›¸å…³çš„çŸ¥è¯†ä½“ç³»ï¼Œç†Ÿæ‚‰å…¶å¤§è‡´ç»“æ„ä»¥åŠè¿ä½œæ–¹å¼ï¼Œä¹Ÿæ˜¯ååˆ†é‡è¦çš„ã€‚

æ‰€ä»¥ï¼Œä¸‹é¢è¿™é‡Œæ˜¯æœ¬äººå°†å¯¹äºå·¥å…·é“¾ç›¸å…³åŸºç¡€çŸ¥è¯†çš„ä¸€äº›æ•´ç†ã€‚è¿™ä¸€ç¯‡æˆ‘ä»¬é¦–å…ˆæ¥ä»‹ç»çš„æ˜¯ï¼Œå·¥å…·é“¾ä¸­çš„**è„šæ‰‹æ¶**ã€‚

### è„šæ‰‹æ¶

æ‰€æœ‰çš„å·¥å…·çš„å¼€ç«¯å°±æ˜¯æˆ‘ä»¬çš„è„šæ‰‹æ¶ï¼Œä½†è„šæ‰‹æ¶å’Œå·¥å…·é“¾å¹¶ä¸æ˜¯ä¸€å›äº‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†genneratorç§°ä¸ºè„šæ‰‹æ¶ã€‚

#### ä»€ä¹ˆæ˜¯è„šæ‰‹æ¶ï¼Ÿ

åšå¼€å‘çš„ï¼Œå½“ç„¶å¯¹äºè„šæ‰‹æ¶è¿™ä¸ªè¯å¹¶ä¸é™Œç”Ÿï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œè„šæ‰‹æ¶æ˜¯æ„å»ºä¸€ä¸ªæ ‡å‡†é¡¹ç›®æ¨¡æ¿çš„ç”Ÿæˆå™¨ã€‚

æˆ‘ä»¬æ¯æ¬¡å¼€å‘æ–°çš„é¡¹ç›®ï¼Œæˆ‘ä»¬éƒ½è¦ä½¿ç”¨å¯¹åº”ç±»å‹é¡¹ç›®çš„è„šæ‰‹æ¶ï¼Œå»åˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå®ƒä¼šä¸€ä¸ªé€šç”¨çš„ç›®å½•ç»“æ„ï¼Œé…ç½®å¥½æˆ‘ä»¬æ‰€éœ€è¦çš„å·¥ä½œç¯å¢ƒã€‚

å¸¸è§çš„è„šæ‰‹æ¶æœ‰ï¼š

- Vueçš„è„šæ‰‹æ¶ï¼švue-cli
- Angularçš„è„šæ‰‹æ¶ï¼šangular-cli
- Reactçš„è„šæ‰‹æ¶ï¼šcreate-react-app

#### å¦‚ä½•åˆ›å»ºè„šæ‰‹æ¶ï¼Ÿ

å…·ä½“è„šæ‰‹æ¶å¹¶ä¸æ˜¯å‡­ç©ºäº§ç”Ÿçš„ï¼Œå³è„šæ‰‹æ¶ä¹Ÿæœ‰å®ƒçš„genneratorã€‚

[Yeoman](https://yeoman.io/learning/)æ˜¯ç°åœ¨ç¤¾åŒºæ¯”è¾ƒæµè¡Œçš„è„šæ‰‹æ¶ç”Ÿæˆå™¨ï¼Œå³genneratorçš„genneratorï¼Œé€šè¿‡Yeomançš„è¿™ä¸ªæ¡†æ¶å¯ä»¥è½»æ˜“çš„å¼€å‘ä¸€ä¸ªèƒ½å¤Ÿåˆå§‹åŒ–é¡¹ç›®åˆ›å»ºæ¨¡æ¿çš„å·¥å…·ã€‚

å®˜ç½‘çš„ä»‹ç»å¦‚ä¸‹ï¼š

> Yeomanæ˜¯ä¸€ä¸ªé€šç”¨çš„è„šæ‰‹æ¶ç³»ç»Ÿï¼Œå…è®¸åˆ›å»ºä»»ä½•ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚å®ƒå…è®¸å¿«é€Ÿå¼€å§‹æ–°é¡¹ç›®å¹¶ç®€åŒ–ç°æœ‰é¡¹ç›®çš„ç»´æŠ¤ã€‚

##### Yeoman çš„ä½¿ç”¨

**1. åŸºæœ¬ä½¿ç”¨**

* ç©ºæ–‡ä»¶å¤¹ï¼Œnpm init ï¼Œå®‰è£…yeomanä¾èµ–
* åŒ…åå¿…é¡»ä¸ºgeneratorå¼€å¤´

```json
// package.json
{
  "name": "generator-toolchain",
  "version": "1.0.0",
  "description": "",
  "main": "gennerator/app/index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "yeoman-generator": "^4.13.0"
  }
}
```

* ç›®å½•ç»“æ„

```text
|â€”â€” package.json
|â€”â€” generators
		|â€”â€”â€” app
			|â€”â€” index.js
			|â€”â€” templates
				|â€”â€” index.html
```

* **æ‹“å±•ç”Ÿæˆå™¨ä»£ç **ï¼š
  Yeomanæä¾›äº†ä¸€ä¸ªåŸºæœ¬ç”Ÿæˆå™¨ï¼Œæ‚¨å¯ä»¥æ‰©å±•å®ƒæ¥å®ç°è‡ªå·±çš„è¡Œä¸ºã€‚è¯¥åŸºæœ¬ç”Ÿæˆå™¨å°†æ·»åŠ æ‚¨å¸Œæœ›ç®€åŒ–ä»»åŠ¡çš„å¤§å¤šæ•°åŠŸèƒ½ã€‚
  åœ¨ç”Ÿæˆå™¨çš„index.jsæ–‡ä»¶ä¸­ï¼Œä»¥ä¸‹æ˜¯æ‰©å±•åŸºæœ¬ç”Ÿæˆå™¨çš„æ–¹æ³•ï¼š

```js
// gennerators/app/index.js
var Generator = require('yeoman-generator');

module.exports = class extends Generator {
    // è¦†ç›–æ„é€ å‡½æ•°
    constructor(args, opts) {
      super(args, opts);
    }
  // æ·»åŠ è‡ªå·±çš„åŠŸèƒ½
    method1() {
      this.log('method 1 just ran');
    }
    method2() {
      this.log('method 2 just ran');
    }
};
```

**è¿è¡Œgenerator**

* npm link
  * ç”±äºæˆ‘ä»¬æ˜¯åœ¨æœ¬åœ°å¼€å‘ç”Ÿæˆå™¨ï¼Œå› æ­¤å°šæœªä½œä¸ºå…¨å±€npmæ¨¡å—æä¾›ã€‚å¯ä»¥ä½¿ç”¨npmåˆ›å»ºä¸€ä¸ªå…¨å±€æ¨¡å—å¹¶å°†å…¶ç¬¦å·é“¾æ¥åˆ°æœ¬åœ°æ¨¡å—ã€‚
  * åœ¨å‘½ä»¤è¡Œä¸Šï¼Œä»ç”Ÿæˆå™¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆåœ¨generator-name /æ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œé”®å…¥ï¼š```npm link```
  * è¿™å°†å®‰è£…æˆ‘ä»¬çš„é¡¹ç›®ä¾èµ–é¡¹ï¼Œå¹¶å°†å…¨å±€æ¨¡å—ç¬¦å·é“¾æ¥åˆ°æœ¬åœ°æ–‡ä»¶ã€‚
* Yo yeoman å¯åŠ¨é¡¹ç›®
  * å…¨å±€å®‰è£…yeoman ```npm install -g yo```

##### Yeomançš„ä½¿ç”¨ç¬”è®°

Yeomanæ”¯æŒçš„åŠŸèƒ½ï¼š

* åŒæ­¥ã€å¼‚æ­¥çš„method
* ```this.log ```: ç”¨äºè¾“å‡º
* ```this.prompt ```:ç”¨äºä¸ç”¨æˆ·è¾“å…¥äº¤äº’

```js
// app/index.js  
async prompting() {
    const answers = await this.prompt([
      {
        type: "input",
        name: "name",
        message: "Your project name",
        default: this.appname // Default to current folder name
      },
      {
        type: "confirm",
        name: "cool",
        message: "Would you like to enable the Cool feature?"
      }
    ]);

    this.log("app name", answers.name);
    this.log("cool feature", answers.cool);
  }
```

* æ–‡ä»¶æ¨¡æ¿ç³»ç»Ÿ

```text
// ç›®å½•ç»“æ„
â”œâ”€â”€â”€package.json
â”œâ”€â”€â”€app/
	 â””â”€â”€â”€templates
	 		â””â”€â”€â”€index.html
   â””â”€â”€â”€index.js
```

index.html:

```html
<html>
  <head>
    <title><%= title %></title>
  </head>
</html>
```

```js
// app/index.js  
var Generator = require('yeoman-generator');

module.exports = class extends Generator {
    // The name `constructor` is important here
    constructor(args, opts) {
      // Calling the super constructor is important so our generator is correctly set up
      super(args, opts);
    }
    writing() {
      this.fs.copyTpl(
        this.templatePath('index.html'),
        this.destinationPath('public/index.html'),
        { title: 'Templating with Yeoman' } // è¿™ä¸ªjsonå‚æ•°ä¼šè¦†ç›–æ¨¡æ¿é‡Œé¢çš„ç±»ä¼¼ <%= title %>è¿™æ ·çš„ä»£ç éƒ¨åˆ†
      );
    }
};
```

ç„¶ååœ¨åˆ«çš„æ–‡ä»¶å¤¹é‡Œè¿è¡Œ```yo toolchain```å‘½ä»¤å°±ä¼šç”Ÿæˆpublicä»¥åŠ```index.html```

* ä¾èµ–ç³»ç»Ÿ

```js
// app/index.js
var Generator = require('yeoman-generator');

module.exports = class extends Generator {
    // The name `constructor` is important here
    constructor(args, opts) {
      // Calling the super constructor is important so our generator is correctly set up
      super(args, opts);
    }
    writing() {
      const pkgJson = {
        devDependencies: {
          eslint: '^3.15.0'
        },
        dependencies: {
          react: '^16.2.0'
        }
      };
  
      // Extend or create package.json file in destination path
      this.fs.extendJSON(this.destinationPath('package.json'), pkgJson);
    }
    install() {
      this.npmInstall();
    }
};
```

##### Vueé¡¹ç›®çš„generatorå®æˆ˜

generatoré¡¹ç›®ç»“æ„

```text
|â€”â€” package.json
|â€”â€” generators
		|â€”â€”â€” app
			|â€”â€” index.js
			|â€”â€” templates
				|â€”â€” index.html
				|â€”â€” main.js
				|â€”â€” webpack.config.js
				|â€”â€” HelloWorld.vue
```

generatorä»£ç ï¼š

```js
// app/index.js
var Generator = require('yeoman-generator');

module.exports = class extends Generator {
    // The name `constructor` is important here
    constructor(args, opts) {
      // Calling the super constructor is important so our generator is correctly set up
      super(args, opts);
    }
    async initPackge () {
      const answers = await this.prompt([
        {
          type: "input",
          name: "name",
          message: "Your project name",
          default: this.appname // Default to current folder name
        },
        {
          type: "input",
          name: "title",
          message: "Your html title",
          default: this.appname // Default to current folder name
        }
      ]);
      const pkgJson = {
        "name": answers.name,
        "version": "1.0.0",
        "description": "",
        "main": "index.js",
        "scripts": {
          "test": "echo \"Error: no test specified\" && exit 1"
        },
        "author": "",
        "license": "ISC",
        "devDependencies": {
        },
        "dependencies": {
        }
      };
      this.fs.extendJSON(this.destinationPath('package.json'), pkgJson);
      this.npmInstall(['vue'], {'save-dev': false});
      this.npmInstall([
        'webpack',
        'vue-loader', 
        'vue-template-compiler', 
        'vue-style-loader', 
        'css-loader',
        'copy-webpack-plugin'
      ], {'save-dev': true});
      this.fs.copyTpl(
        this.templatePath('HelloWorld.vue'),
        this.destinationPath('src/HelloWorld.vue'),
        {}
      );
      this.fs.copyTpl(
        this.templatePath('webpack.config.js'),
        this.destinationPath('webpack.config.js'),
        {}
      );
      this.fs.copyTpl(
        this.templatePath('main.js'),
        this.destinationPath('src/main.js'),
        {}
      );
      this.fs.copyTpl(
        this.templatePath('index.html'),
        this.destinationPath('src/index.html'),
        { title: answers.title }
      );
    }
};
```

ä½¿ç”¨äº†ä¸Šè¿°generatoråˆå§‹åŒ–ï¼Œå¹¶ä½¿ç”¨webpackæ‰“åŒ…ä¹‹åçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```sh
// vue-demoç›®å½•ç»“æ„
â”œâ”€â”€â”€package.json
â”œâ”€â”€â”€webpack.config.js
â”œâ”€â”€â”€dist
		â””â”€â”€â”€main.js
		â””â”€â”€â”€index.html
â”œâ”€â”€â”€src
	 â””â”€â”€â”€main.js
	 â””â”€â”€â”€index.html
   â””â”€â”€â”€HelloWorld.vue
```

### å‚è€ƒé™„å½•

[å·¥å…·é“¾ï¼šä»€ä¹ˆæ ·çš„å·¥å…·é“¾æ‰èƒ½æå‡å›¢é˜Ÿæ•ˆç‡ï¼Ÿ](https://time.geekbang.org/column/article/94644)

[Reactç³»åˆ—å›› - Reactè„šæ‰‹æ¶](https://zhuanlan.zhihu.com/p/149712752)

[Yeoman](https://yeoman.io/authoring/)

### åè®°

æˆ‘æ˜¯å½¤çˆ±ï¼Œä¸€ä¸ªåœ¨æ²‰æººäºå¯‚å¯ä»£ç æµ·æ´‹é‡Œçš„å‰ç«¯ç¨‹åºå‘˜ğŸ‘¨ğŸ»â€ğŸ’»

æ¬¢è¿å„ä½å¤§ä½¬çš„èµæ•™ğŸ™

æœŸå¾…ä¸åŒæ ·åœ¨åŠªåŠ›æ‘¸ç´¢çš„å°ä¼™ä¼´ä»¬äº¤æµğŸ™Œ



